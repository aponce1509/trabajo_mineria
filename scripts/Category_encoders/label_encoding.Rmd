---
title: "label_encoding"
author: "Javier Moreno"
date: "25/12/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


```{r}
library(tidyverse)

df_features = read_csv("training_set_features.csv")
df_labels = read_csv("training_set_labels.csv")

df = merge(df_features,df_labels)
df$respondent_id = NULL
```


```{r}
apply(df,2,function(x) unique(x))
apply(df,2,function(x) length(unique(x)))
```
#binarias numericas:
  
behavioral_antiviral_meds
behavioral_avoidance
behavioral_face_mask
behavioral_wash_hands
behavioral_large_gatherings
behavioral_outside_home
behavioral_touch_face

doctor_recc_h1n1
doctor_recc_seasonal
chronic_med_condition
child_under_6_months
health_worker
health_insurance

  h1n1_vaccine          #target            #no tiene NA
  seasonal_vaccine      #target            #no tiene NA
  
#binarias char:
  
sex                                        #no tiene NA
marital_status
rent_or_own
  
#orden numericas:
  
h1n1_concern
h1n1_knowledge
opinion_h1n1_vacc_effective
opinion_h1n1_risk
opinion_h1n1_sick_from_vacc
opinion_seas_vacc_effective
opinion_seas_risk
opinion_seas_sick_from_vacc

#orden char:
  
education         #no tiene espaciados constantes
age_group         #no tiene espaciados constantes         #no tiene NA
income_poverty    #no tiene espaciados constantes

#sin orden char:
  
race                      #pocas variables (4)            #no tiene NA
employment_status         #casi binario (3)
hhs_geo_region            #bastantes variables (10)       #no tiene NA
census_msa                #casi binario (3)               #no tiene NA
employment_industry       #muchas variables (22)
employment_occupation     #muchas variables (24)


#Conclusion:
Las binarias numericas no hay que tocarlas, pero recordar que tienen 0 o 1, así que cuidado con la distancia

Las binarias char hay que pasarlas a binarias normales, no perdemos nada.

Las de orden numericas tampoco hay que tocarlas, y en estas sí va bien la distancia y eso, pero quizá hay que normalizarlas.
Dijimos que quizá interesa bajar la cardinalidad agrupando 1 y 2, 4 y 5. Al final tendriamos tres grupos: [1,2] [3] [4,5]

Las de orden char se pueden pasar a numéricas con orden pero cuidado con la distancia, porque puede no ser representativa. Elegir bien la medida de distancia por estas!

Las de sin orden char... hay que buscarse la vida. 
Quizá se pueden hacer dummy o one hot las de race, employment, census
Las que tienen bastantes variables, se puede hacer binary, hash o target/LOO (bayesiana)
